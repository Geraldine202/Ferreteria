<ion-app>
  <ion-split-pane contentId="main-content" style="margin-top: 40px;">
    <div class="ion-page" id="main-content">
      <ion-content>


        <ion-fab vertical="bottom" horizontal="end" slot="fixed">
          <ion-fab-button color="primary" routerLink="/carrito">
            <ion-icon name="cart"></ion-icon>
          </ion-fab-button>
        </ion-fab>


        <div class="slider-container">
          <div class="slider" *ngFor="let imagen of imagenes; let i = index">
            <ion-item>
              <img [src]="imagen" [class.active]="i === imagenIndex" style="width: 100%; height: auto;" />
            </ion-item>
          </div>
        </div>


        <ion-button expand="full" fill="solid" color="primary" routerLink="/productos">
          ¡Compra Ahora!
        </ion-button>


        <ion-grid>
          <ion-row>
            <ion-col size="6" size-md="3" *ngFor="let prod of producto">
              <ion-card class="mini-card hover-shadow">
                <ion-img [src]="'http://localhost:8080' + prod.imagen" alt="Imagen Producto" class="mini-img"></ion-img>
                <ion-card-header class="mini-header">
                  <ion-card-title class="mini-title">{{ prod.nombre }}</ion-card-title>
                </ion-card-header>
                <ion-card-content class="mini-content">
                  <p class="mini-desc">{{ prod.descripcion }}</p>
                  <h3 class="mini-price">
                    {{ prod.precio | number:'1.0-0' }} CLP
                    <span *ngIf="dolar">
                      (USD {{ (prod.precio / dolar) | number:'1.2-2' }})
                    </span>
                  </h3>
                </ion-card-content>
                <ion-button class="mini-btn animate-hover" size="small" fill="solid" color="primary" (click)="agregarAlCarrito(prod)">
                  <ion-icon name="cart-outline" slot="start"></ion-icon>
                  Añadir
                </ion-button>
              </ion-card>
            </ion-col>
          </ion-row>
        </ion-grid>


        <h2 style="text-align: center;">Productos más vendidos</h2>
        <div class="featured-slider-container">
          <button class="slider-btn prev" (click)="moveSlider(-1)">&#10094;</button>

          <div class="featured-slider">
            <ion-card *ngFor="let item of getProductosVisibles(); let i = index" 
                      class="mini-card hover-shadow"
                      [ngClass]="{'centered': item.isCentral, 'faded': !item.isCentral}">
              <img [src]="item.producto.imgSrc" alt="{{ item.producto.title }}" class="mini-img" />
              <ion-card-header>
                <ion-card-title class="mini-title">{{ item.producto.title }}</ion-card-title>
              </ion-card-header>
              <ion-card-content>
                <p class="product-description">{{ item.producto.description }}</p>
                <p class="product-price">{{ item.priceDisplay }}</p>
              </ion-card-content>
              <ion-button class="mini-btn animate-hover" size="small" fill="solid" color="primary" (click)="agregarAlCarrito(item.producto)">
                <ion-icon name="cart-outline" slot="start"></ion-icon>
                Añadir
              </ion-button>
            </ion-card>
          </div>

          <button class="slider-btn next" (click)="moveSlider(1)">&#10095;</button>
        </div>
        <ion-footer>
          <ion-toolbar color="dark">
            <ion-grid>
              <ion-row class="footer-content">
                <ion-col size="12" size-md="3">
                  <div class="social-icons">
                    <ion-button href="https://www.instagram.com/tuferreteria" target="_blank" color="secondary">
                      <ion-icon name="logo-instagram"></ion-icon>
                    </ion-button>
                    <ion-button href="https://www.facebook.com/tuferreteria" target="_blank" color="secondary">
                      <ion-icon name="logo-facebook"></ion-icon>
                    </ion-button>
                  </div>
                </ion-col>


                <ion-col size="12" size-md="3">
                  <div class="footer-links">
                    <a href="/terminos" class="footer-link">Términos y condiciones</a>
                    <a href="/privacidad" class="footer-link">Política de privacidad</a>
                    <a href="/ayuda" class="footer-link">Ayuda</a>
                  </div>
                </ion-col>


                <ion-col size="12" size-md="3">
                  <div class="footer-contact">
                    <p><strong>Contáctanos:</strong></p>
                    <p>Tel: +123 456 789</p>
                    <p>Email: contacto&#64;ferreteria.com</p>
                  </div>
                </ion-col>


                <ion-col size="12" size-md="3">
                  <div class="footer-copyright">
                    <p>&copy; 2025 Los Clavitos de Pablito. Todos los derechos reservados.</p>
                  </div>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-toolbar>
        </ion-footer>

      </ion-content>
    </div>
  </ion-split-pane>
</ion-app>
